<link rel="import" href="../polymer/polymer.html">

<script>

  Polymer({
    name: 'x-route',
    published: [
      'route'
    ],
    created: function() {
      // TODO(sjmiles): ug
      this.async(function() {
        this.parseLocation();
      });
      addEventListener('popstate', function() {
        this.parseLocation();
      }.bind(this));
    },
    parseLocation: function() {
      this.route = location.hash.slice(1);
    },
    routeChanged: function(route) {
      if (route !== null) {
        history.replaceState(null, '', '#' + route);
      }
      this.fire('route-change');
    }
  });

</script>
